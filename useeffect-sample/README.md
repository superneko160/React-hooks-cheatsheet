# useEffect

副作用を実行するフック。**副作用とは、コンポーネントの描画とは無関係の処理**を指す。（例：タイマー処理、データの取得、ログの出力など）

## 構文

### 基本構文

```tsx
useEffect(() => {
    // 実行する副作用
}, [])
```

useEffectには第1引数に実行する副作用（処理）を渡す。  
第2引数は**依存配列**と呼ばれる。空の配列を渡すと、副作用は、レンダリングが終わったあとにのみ実行する。依存配列にデータを渡すと、そのデータが変化したときだけ処理を実行するようになる。

```tsx
useEffect(() => {
    // 実行する副作用
}, [データ1, データ2])  // 指定したいデータが複数ある場合は、カンマ区切りで渡す
```

### クリーンアップ関数

`useEffect`は以下のように関数を返すことができる。これは**クリーンアップ関数**と呼ばれ、**次の`useEffect`が実行される直前、またはアンマウント時に実行される。**

```tsx
useEffect(() => {
  // 実行する副作用

  // クリーンアップ関数
  return () => {
    // この場合、依存配列が空なので、アンマウント時にここに記述された処理が実行される
  }
}, [])
```

## 概要

Reactにおいて、コンポーネントの描画とは無関係の処理を関数コンポーネント内に記述すると、処理のなかで参照しているDOMが描画によって置き換わったり、状態を更新して再描画が発生したり、無限ループになるリスクがある。  
`useEffect`を利用すると、`props`や`state`が更新され、再描画が終わったタイミングで処理が実行してくれる。
